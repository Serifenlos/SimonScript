//@include "./assets/json2.js";
//@include "/Users/adrians/Arbeit/GitHub/SimonScript/build/A__psScripts/functions/basic.jsx";
//@include "/Users/adrians/Arbeit/GitHub/SimonScript/build/A__psScripts/functions/pref.jsx";
//@include "/Users/adrians/Arbeit/GitHub/SimonScript/build/A__psScripts/functions/utils.jsx";
//@include "/Users/adrians/Arbeit/GitHub/SimonScript/build/A__psScripts/functions/LUT-dodge.jsx";
//@include "/Users/adrians/Arbeit/GitHub/SimonScript/build/A__psScripts/functions/LUT-burn.jsx";
//@include "/Users/adrians/Arbeit/GitHub/SimonScript/build/A__psScripts/functions/LUT-maskPreview.jsx";
//@include "/Users/adrians/Arbeit/GitHub/SimonScript/build/A__psScripts/functions/LUT-maskPreview_v2.jsx";
//@include "/Users/adrians/Arbeit/GitHub/SimonScript/build/A__psScripts/functions/dialog.jsx";
//@include "/Users/adrians/Arbeit/GitHub/SimonScript/build/A__psScripts/functions/ready.jsx";
//@include "/Users/adrians/Arbeit/GitHub/SimonScript/build/A__psScripts/functions/view.jsx";
//@include "/Users/adrians/Arbeit/GitHub/SimonScript/build/A__psScripts/functions/layer.jsx";
//@include "/Users/adrians/Arbeit/GitHub/SimonScript/build/A__psScripts/functions/save.jsx";
//@include "/Users/adrians/Arbeit/GitHub/SimonScript/build/A__psScripts/functions/loopFiles.jsx";
//@include "/Users/adrians/Arbeit/GitHub/SimonScript/build/A__psScripts/functions/meta.jsx";
//@include "/Users/adrians/Arbeit/GitHub/SimonScript/build/A__psScripts/functions/selection.jsx";
//@include "/Users/adrians/Arbeit/GitHub/SimonScript/build/A__psScripts/functions/channel.jsx";
//@include "/Users/adrians/Arbeit/GitHub/SimonScript/build/A__psScripts/functions/neural_depthmap.jsx";
function tiefenmakse_part1(e){layer_selectedIDX_get();if(e||layer_selectedIDX_get().length>1){e?layer_mergeVisible(e):(layer_copyLayers(),layer_mergeLayers()),nameLayer("helper__depthMask_image");for(var r=hasBackground()?0:1;layer_checkExistence(r);)r++;moveLayer("helper__depthMask_image",parseInt(r-1),"up"),gotoLayer("helper__depthMask_image")}else{for(layer_checkExistence(layer_getIDXbyString("Original")[0])?gotoLayer("Original"):gotoLayer(layer_selectedIDX_get()[layer_selectedIDX_get().length-1]);doc.activeLayer.kind!=LayerKind.NORMAL;)gotoLayer(getActiveLayerIndex()-1);doc.activeLayer.kind!=LayerKind.SmartObject&&(executeAction(sTID("copyToLayer"),void 0,DialogModes.NO),nameLayer("helper__depthMask_image"))}}function quick_farbbereich(e,r,a,t,n){selection_deselect(),gotoFill(),select_Farbbereich(e),createColorLayer(r,"multiply","none",0,"xx",a,t,n),gotoFill()}function channel_setSaturationXX(e,r){var a="difference";kanalberechnung("red",f,"grain",f,e,a,"rg","RGB"),kanalberechnung("red",f,"blue",f,e,a,"rb","RGB"),kanalberechnung("rg",f,"rb",f,"this",r,"R","RGB"),kanalberechnung("grain",f,"blue",f,e,a,"gb","RGB"),kanalberechnung("rg",f,"gb",f,"this",r,"G","RGB"),kanalberechnung("rb",f,"gb",f,"this",r,"B","RGB"),kanalberechnung("R",f,"G",f,"this",r,"RG","RGB"),kanalberechnung("RG",f,"B",f,"this",r,"saturation","RGB")}function channel_setSaturation_2(e,r){var a="subtract";kanalberechnung("red",t,"grain",t,e,a,"rg","RGB"),kanalberechnung("red",t,"blue",t,e,a,"rb","RGB"),kanalberechnung("rg",f,"rb",f,"this",r,"R","RGB"),kanalberechnung("grain",t,"red",t,e,a,"gr","RGB"),kanalberechnung("grain",t,"blue",t,e,a,"gb","RGB"),kanalberechnung("gr",f,"gb",f,"this",r,"G","RGB"),kanalberechnung("blue",t,"red",t,e,a,"br","RGB"),kanalberechnung("blue",t,"grain",t,e,a,"bg","RGB"),kanalberechnung("br",f,"bg",f,"this",r,"B","RGB"),kanalberechnung("R",f,"G",f,"this",r,"RG","RGB"),kanalberechnung("RG",f,"B",f,"this",r,"saturation","RGB")}function run(){setMeta_2("startID",layer_selectedID_get()),createLayer("AutoTonwert","levels","normal","gray",80,"black",f,f),layer_selectedID_set(getMeta_2("startID")),delMeta_2("startID")}function RemoveAlphaChannels(){if(0!=app.documents.length){for(var e=app.activeDocument.channels,r=[],a=0;a<e.length;a++){(t=e[a]).kind!=ChannelType.COMPONENT&&r.push(t)}for(;r.length;){var t;(t=r.pop()).remove()}}}function layer_copyLayers_v2(){executeAction(sTID("copyToLayer"),void 0,DialogModes.NO)}function layer_duplicateLayer(e,r){var a=new ActionDescriptor,t=new ActionReference;if("number"==typeof e)t.putIndex(s2t("layer"),e);else if("string"==typeof e)if(layer_checkExistence(e))t.putName(s2t("layer"),e);else{var n=layer_getIDXbyString(e);t.putIndex(s2t("layer"),n[0])}else t.putEnumerated(s2t("layer"),s2t("ordinal"),s2t("targetEnum"));a.putReference(s2t("null"),t),a.putString(s2t("name"),r),executeAction(s2t("duplicate"),a,DialogModes.NO)}function layer_count(){function e(e){var r=new ActionReference;return r.putProperty(charIDToTypeID("Prpr"),stringIDToTypeID("layerSection")),r.putIndex(charIDToTypeID("Lyr "),e),typeIDToStringID(executeActionGet(r).getEnumerationValue(stringIDToTypeID("layerSection")))}var r,a=((r=new ActionReference).putProperty(charIDToTypeID("Prpr"),charIDToTypeID("NmbL")),r.putEnumerated(charIDToTypeID("Dcmn"),charIDToTypeID("Ordn"),charIDToTypeID("Trgt")),executeActionGet(r).getInteger(charIDToTypeID("NmbL"))),t=a;if(activeDocument.layers[activeDocument.layers.length-1].isBackgroundLayer){var n=0;t++}else n=1;for(;n<a;n++){"layerSectionEnd"==e(n)&&t--}return t}function namederfunktion(){const e=workingProfile_get("Gray"),r=doc.colorProfileName;alert(e),alert(r),gamma_L=["eciRGB v2","eciRGB v2 ICCv4"],gamma_18=["sRGB IEC61966-2.1","ProPhoto RGB","Display P3","image P3","Apple RGB","ColorMatch RGB"],gamma_22=["Adobe RGB (1998)","BestRGB","Beta RGB","DonRGB4.icm","MaxRGB","Russell RGB"],array_contains(gamma_18,r)?(alert("Gamma 1.8"),"Gray Gamma 1.8"!=e&&(alert("change it"),workingProfile_set("Gray","Gray Gamma 1.8"),alert("gechanged: "+workingProfile_get("Gray")))):array_contains(gamma_22,r)?(alert("Gamma 2.2"),"Gray Gamma 2.2"!=e&&(alert("change it"),workingProfile_set("Gray","Gray Gamma 2.2"),alert("gechanged: "+workingProfile_get("Gray")))):array_contains(gamma_L,r)?(alert("Gamma L"),workingProfile_set("Gray","Gray-elle-V4-labl.icc"),alert("gechanged: "+workingProfile_get("Gray"))):alert("Vorsicht\nDie Helligkeitsverteilung könnte fehlerhaft sein.\nfehlende Info zum Gamma von '"+r+"'"),e!=workingProfile_get("Gray")&&workingProfile_set("Gray",e)}function mask_farbmaske_viaSaturation(_folder,_toleranz){if(!layer_checkExistence(_folder)){with(createGroup(_folder,"passThrough","none",100,f),activeDocument)activeLayer.move(layers[0],ElementPlacement.PLACEBEFORE);createLayer("Farbe auswählen","hueSaturation","difference","none",100,"none",f,f),createLayer("invert + gradation","curves","normal","none",100,"none",f,f),adjustLayer_curves_set(0,255,255,0),createLayer("Maske Preview","colorLookup","normal","none",100,"none",f,f),LUT_maske_preview(),gotoLayer("Farbe auswählen");var color1=app_getColor("hsb","vordergrund"),color2=app_getColor("hsb","hintergrund");if(0!=color1[1]&&0!=color1[2]||0==color2[1]||0==color2[2]){if(0==color1[1]||0==color1[2])var color1=[0,100,100]}else var color1=color2;if(0==color2[1]||0==color2[2])var color2=color1;var colors=[color1,color2];colors.sort((function(e,r){return e[0]-r[0]}));var color1=colors[0],color2=colors[1];adjustLayer_sat_set(1,adjustHue(color1[0],-_toleranz),color1[0],color2[0],adjustHue(color2[0],_toleranz),f,f,100),app_simulateKeyPress_alt3()}}function adjustLayer_sat_get(){var e=new ActionReference;return e.putEnumerated(charIDToTypeID("Lyr "),charIDToTypeID("Ordn"),charIDToTypeID("Trgt")),executeActionGet(e).getInteger(stringIDToTypeID("visible"))}function writeln(e){try{return $.writeln(e+": "+e)}catch(e){}}function isFileOpen(e){for(var r=!1,a=0;a<app.documents.length;a++)if(-1!==app.documents[j].name.indexOf(e)){r=!0;break}return r}function deFrei(){
//@include "./assets/json2.js"
loadJSON("~/.ss_settings.json");const e=jsonValue("RZ_qualityJPG");try{if(app.activeDocument.layerSets.getByName("Freisteller")){var r=layer_selectedID_get();try{var a=!1;if(getMeta_3("isWoodwing"))a=Boolean(getMeta_3("isWoodwing"));try{gotoLayer("Freisteller"),ungroup(),gotoLayer("Freisteller helper"),deleteActiveLayer()}catch(e){}if(a){if(getMeta_3("woodwing_RGB"))var n=getMeta_3("woodwing_RGB");if(getMeta_3("woodwing_file"))var o=getMeta_3("woodwing_file");if(getMeta_3("idDocName"))var i=getMeta_3("idDocName");BridgeTalkMessage_openDocID(i,o,!1),replaceMeta_3_suffix("woodwing_file","psd","jpg"),replaceMeta_3_suffix("woodwing_RGB","psd","jpg"),saveMultiformat(new File(n),"jpg",t,e,f,f)}else{var l=new Folder(doc.path),c=GetFileNameOnly(doc.name),s=/(?:\.([^.]+))?$/.exec(doc.name)[1],g=new File(l+"/"+c+"-frei."+s);g.exists&&g.remove()}}catch(e){alert(e)}layer_selectedID_set(r)}}catch(e){return alert("Abbruch!\nkeine Ebene names 'Freisteller' gefunden\n"+e),!1}}function BridgeTalkMessage_openDocID(e,r,a){var t=new BridgeTalk;t.target="indesign",t.body=runID.toSource()+"('"+e+"','"+r+"','"+a+"');",t.onResult=function(e){},t.send(10)}function runID(e,r,a){try{if(function(e){for(var r=!1,a=0;a<app.documents.length;a++)if(-1!==app.documents[a].name.indexOf(e)){r=!0,app.activeDocument=app.documents[a];break}return r}(e))app.activeDocument.links.itemByName(r).editOriginal();else alert("kein Focus auf der Datei?")}catch(e){}return" "}function canvasSize(e,r){var a=new ActionDescriptor;a.putBoolean(s2t("relative"),e),a.putUnitDouble(s2t("height"),s2t("distanceUnit"),r),a.putEnumerated(s2t("vertical"),s2t("verticalLocation"),s2t("bottomEnum")),executeAction(s2t("canvasSize"),a,DialogModes.NO)}var enlargeCanvas_mm=[0,0,2.967,0],enlargeCanvas_pt=[0,0,8.40951201110995,0],outer_width_mm=152.333,outer_height_mm=89.958,inner_width_mm=168.032,inner_height_mm=112.021,outer_width_pt=431.811023622047,outer_height_pt=255,inner_width_pt=476.31,inner_height_pt=317.539892359025;function resizeCanvas(e,r,a,t){startRulerUnits=app.preferences.rulerUnits,app.preferences.rulerUnits=a;var n=doc.width.value,o=doc.height.value,i=n+e,l=o+r;$.writeln("docWidth: "+n),$.writeln("docHeight: "+o),$.writeln("canvasWidth: "+i),$.writeln("canvasHeight: "+l),doc.resizeCanvas(i,l,t),app.preferences.rulerUnits=startRulerUnits}function RemoveAlphaChannels(){if(0!=app.documents.length){for(var e=app.activeDocument.channels,r=[],a=0;a<e.length;a++){(t=e[a]).kind!=ChannelType.COMPONENT&&r.push(t)}for(;r.length;){var t;(t=r.pop()).remove()}}}function channel_checkExistenceByName(e){for(var r=doc.channels,a=!1,t=0;t<r.length;t++){var n=r[t];if(n.name==e&&n.kind==ChannelType.MASKEDAREA){a=!0;break}}return a}function channel_deleteX(e){for(;channel_checkExistenceByName(e);)channel_delete(e)}alert("ding");