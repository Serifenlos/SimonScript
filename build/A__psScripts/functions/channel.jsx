function channel2mask(e,n){for(var t=1;layer_checkExistence(layer_getIDXbyString(n+" "+t)[0]);)t++;createGroup(n+" "+t,"passThrough","none",100,f),createMask(),channel_select(e,!1),select_all(),copy(),channel_select("mask",!0),paste_into(),channel_select("RGB",!1),selection_deselect()}function channel2selection(e){var n=new ActionDescriptor,t=new ActionReference,a=new ActionReference;t.putProperty(s2t("channel"),s2t("selection")),n.putReference(s2t("null"),t),a.putName(s2t("channel"),e),n.putReference(s2t("to"),a),executeAction(s2t("set"),n,DialogModes.NO)}function channel_delete(e){var n=new ActionDescriptor,t=new ActionReference;t.putName(s2t("channel"),e),n.putReference(s2t("null"),t),executeAction(s2t("delete"),n,DialogModes.NO)}function channel_name(e){var n=new ActionDescriptor,t=new ActionDescriptor,a=new ActionReference;a.putEnumerated(s2t("channel"),s2t("ordinal"),s2t("targetEnum")),n.putReference(s2t("null"),a),t.putString(s2t("name"),e),n.putObject(s2t("to"),s2t("channel"),t),executeAction(s2t("set"),n,DialogModes.NO)}function channel_select(e,n){var t=new ActionDescriptor,a=new ActionReference;e&&("red"==e||"grain"==e||"blue"==e||"RGB"==e||"mask"==e||"cyan"==e||"magenta"==e||"yellow"==e||"black"==e||"CMYK"==e||"lightness"==e||"a"==e||"b"==e||"lab"==e?a.putEnumerated(s2t("channel"),s2t("channel"),s2t(e)):a.putName(s2t("channel"),e),t.putReference(s2t("null"),a),t.putBoolean(s2t("makeVisible"),n),executeAction(s2t("select"),t,DialogModes.NO))}function channel_setSaturation(e,n){var t="difference";kanalberechnung("red",f,"grain",f,e,t,"1","RGB"),kanalberechnung("red",f,"blue",f,e,t,"2","RGB"),kanalberechnung("1",f,"2",f,"this",n,"R","RGB"),channel_delete("1"),channel_delete("2"),kanalberechnung("grain",f,"red",f,e,t,"1","RGB"),kanalberechnung("grain",f,"blue",f,e,t,"2","RGB"),kanalberechnung("1",f,"2",f,"this",n,"G","RGB"),channel_delete("1"),channel_delete("2"),kanalberechnung("blue",f,"red",f,e,t,"1","RGB"),kanalberechnung("blue",f,"grain",f,e,t,"2","RGB"),kanalberechnung("1",f,"2",f,"this",n,"B","RGB"),channel_delete("1"),channel_delete("2"),kanalberechnung("R",f,"G",f,"this",n,"RG","RGB"),kanalberechnung("RG",f,"B",f,"this",n,"saturation","RGB"),channel_delete("R"),channel_delete("G"),channel_delete("B"),channel_delete("RG")}function kanalberechnung(e,n,t,a,c,l,r,s){var u=new ActionDescriptor,i=new ActionDescriptor,o=(new ActionDescriptor,new ActionReference),h=new ActionReference;new ActionReference;u.putClass(s2t("new"),s2t("channel")),"red"==e||"grain"==e||"blue"==e||"gray"==e?o.putEnumerated(s2t("channel"),s2t("channel"),s2t(e)):o.putName(s2t("channel"),e),"merged"==c?o.putEnumerated(s2t("layer"),s2t("ordinal"),s2t("merged")):"this"!=c&&o.putName(s2t("layer"),c),i.putReference(s2t("to"),o),i.putBoolean(s2t("invert"),n),i.putEnumerated(s2t("calculation"),s2t("calculationType"),s2t(l)),"red"==t||"grain"==t||"blue"==t||"gray"==t?h.putEnumerated(s2t("channel"),s2t("channel"),s2t(t)):h.putName(s2t("channel"),t),"merged"==c?h.putEnumerated(s2t("layer"),s2t("ordinal"),s2t("merged")):"this"!=c&&h.putName(s2t("layer"),c),i.putReference(s2t("source2"),h),i.putBoolean(s2t("invertSource2"),a),u.putObject(s2t("using"),s2t("calculation"),i),executeAction(s2t("make"),u,DialogModes.NO),channel_name(r),channel_select(s,!1)}