function DodgeBurn_highlow(e){createGroup("Tiefen","passThrough","gray",100,f),createLayer("Burn ▽","colorLookup","normal","gray",100,"black",f,f),LUT_burn(),blendif("current",0,0,0,255),createLayer("Dodge ▽","colorLookup","normal","gray",100,"black",f,f),LUT_dodge(),blendif("current",0,0,0,255),selectParent(),createGroup("Dodge & Burn △▽","passThrough","gray",100,t),createLayer("Burn △","colorLookup","normal","gray",100,"black",f,f),LUT_burn(),blendif("current",0,255,255,255),createGroup("Lichter","passThrough","gray",100,t),createLayer("Dodge △","colorLookup","normal","gray",100,"black",f,f),LUT_dodge(),blendif("current",0,255,255,255),selectParent(),selectParent(),e&&toogleOpenCloseSet()}function DodgeBurn_highmidlow(e){createGroup("Tiefen","passThrough","gray",100,f),createLayer("Burn ▽","colorLookup","normal","gray",100,"black",f,f),LUT_burn(),blendif("current",0,0,0,255),createLayer("Dodge ▽","colorLookup","normal","gray",100,"black",f,f),LUT_dodge(),blendif("current",0,0,0,255),selectParent(),createGroup("Dodge & Burn △◊▽","passThrough","gray",100,t),createLayer("Burn ⬨","colorLookup","normal","gray",100,"black",f,f),LUT_burn(),blendif("current",20,202,109,240),createGroup("Mitten","passThrough","gray",100,t),createLayer("Dodge ⬨","colorLookup","normal","gray",100,"black",f,f),LUT_dodge(),blendif("current",20,202,109,240),selectParent(),selectParent(),createLayer("Burn △","colorLookup","normal","gray",100,"black",f,f),LUT_burn(),blendif("current",0,255,255,255),createGroup("Lichter","passThrough","gray",100,t),createLayer("Dodge △","colorLookup","normal","gray",100,"black",f,f),LUT_dodge(),blendif("current",0,255,255,255),selectParent(),selectParent(),e&&toogleOpenCloseSet()}function burn(){createLayer("Burn","colorLookup","normal","gray",100,"black",f,f),LUT_burn()}function dodge(){createLayer("Dodge","colorLookup","normal","gray",100,"black",f,f),LUT_dodge()}function dodgeburn(){createGroup("Dodge & Burn","passThrough","gray",100,f),createLayer("Burn","colorLookup","normal","gray",100,"black",f,f),LUT_burn(),createLayer("Dodge","colorLookup","normal","gray",100,"black",f,f),LUT_dodge()}function dodgeburn_mid(){createGroup("Dodge & Burn ⬨","passThrough","gray",100,f),createLayer("Burn ⬨","colorLookup","normal","gray",100,"black",f,f),LUT_burn(),blendif("current",20,202,109,240),createLayer("Dodge ⬨","colorLookup","normal","gray",100,"black",f,f),LUT_dodge(),blendif("current",20,202,109,240)}function dodgeburn_toggle(){try{var e=doc.activeLayer,r=getActiveLayerIndex();e.kind==LayerKind.COLORLOOKUP&&(/burn/i.test(e.name)?(selectLayer("up",1),/dodge/i.test(doc.activeLayer.name)||(gotoLayer(r),selectLayer("down",1),/dodge/i.test(doc.activeLayer.name)||gotoLayer(r))):/dodge/i.test(e.name)&&(selectLayer("down",1),/burn/i.test(doc.activeLayer.name)||(gotoLayer(r),selectLayer("up",1),/burn/i.test(doc.activeLayer.name)||gotoLayer(r))))}catch(e){}}function freisteller_allHG(){for(var e=app.activeDocument,r=app.foregroundColor,a=r.hsb.hue,t=r.hsb.saturation,o=r.hsb.brightness,l=0;l<app.documents.length;l++){app.activeDocument=app.documents[l];app.activeDocument;try{if(app.activeDocument.layers.getByName("Freisteller helper"))try{var n=layer_selectedIDX_get();gotoLayer("Freisteller helper"),layer_getSolidFillColor()[0]==app_getForegroundColor()[0]?layer_getSolidFillColor()[1]==app_getForegroundColor()[1]&&layer_getSolidFillColor()[2]==app_getForegroundColor()[2]&&(isVisible()?hide():makeVisible()):layer_solidColorHSB_change(a,t,o),layer_selectedIDX_set(n)}catch(e){}}catch(e){}}app.activeDocument=e}function freisteller_button(){try{if(app.activeDocument.layerSets.getByName("Freisteller"))try{app.activeDocument.path;app.activeDocument.suspendHistory("Freisteller SaveRGB","freisteller_saveRGB()"),app.activeDocument.save()}catch(e){alert(e)}}catch(e){app.activeDocument.suspendHistory("Freisteller-Gruppe","freisteller_createGroup()");try{app.activeDocument.path;app.activeDocument.suspendHistory("Freisteller SaveRGB","freisteller_saveRGB()"),app.activeDocument.save()}catch(e){}}}function freisteller_createGroup(){var e=layer_selectedIDX_get();selectLayers("selectAllLayers"),createGroup("Freisteller","passThrough","none",100,t);try{isSelectionActive()&&maskFromSelection()}catch(e){}toogleOpenCloseSet();var r=app.activeDocument.layerSets.getByName("Freisteller");createColorLayer("Freisteller helper","normal","none",100,"none",128,128,128),hide(),app.activeDocument.activeLayer.move(r,ElementPlacement.PLACEAFTER),layer_selectedIDX_set(e)}function freisteller_saveRGB(){var e=layer_selectedIDX_get(),r=null;if(gotoLayer("Freisteller"),hasLayerMask()){var a=getMaskVisibility();if(setMaskVisibility(!0),"Freisteller helper"==getLayerName(1)){r=isVisibleIDX(1);makeVisByIndex(1,!1)}var o=app.activeDocument.path+"/"+GetFileNameOnly(app.activeDocument.name)+"-frei";savePSD_v2(new File(o),t,t,t,f),setMaskVisibility(!1),null!=r&&makeVisByIndex(1,r),setMaskVisibility(a)}layer_selectedIDX_set(e)}function himmelmaske(e,r){var a=layer_selectedIDX_get();cancel=!1,selection_loop((function(){select_sky(!1)})),cancel||("Selection"==r?(layer_selectedIDX_set(a),"nicht Himmel"==e&&select_invert()):(gotoLayer(a[a.length-1]),selection2mask(e),"nicht Himmel"==e&&(gotoMask(),invert(),gotoFill())))}function motivmaske(e,r){var a=layer_selectedIDX_get();cancel=!1,selection_loop((function(){select_motiv()})),cancel||("Selection"==r?(layer_selectedIDX_set(a),"nicht Motiv"==e&&select_invert()):(gotoLayer(a[a.length-1]),selection2mask(e),"nicht Motiv"==e&&(gotoMask(),invert(),gotoFill())))}function startschuss(){if(debug&&time_start(),indexcolor2rgb(),noProfile(),gray2rgb(),cmyk2rgb(),sRGB2eciRGB(),8!=getBitDepth()&&dialog_bitdepth(),"undefined"!=typeof myPsDoc&&setSize("width",myPsDoc.width.value*hScale/10),hasBackground()&&0!=getActiveLayerIndex()){var e=doc.activeLayer.name;gotoLayer(0),nameLayer("HG"),gotoLayer(e);e=""}nameLayer("Original"),smartObject(),createGroup("vorher","passThrough","none",100,t),dublicate("nachher"),gotoLayer("vorher"),selectLayer("down",1),nameLayer("vorher Ebene"),rasterSmartObject(),toogleOpenCloseSet(),selectLayer("up",1),createColorLayer("Weiss","normal","none",100,"none",255,255,255),moveLayer("Weiss","Original","down"),createGroup("Einstellungen","passThrough","none",100,f),createLayer("AutoTonwert","levels","normal","gray",100,"none",f,t),toogleVisibility(),createLayer("Gradation neutral","curves","normal","gray",100,"none",f,f),DodgeBurn_highmidlow(!0),selectLayer("up",1),createLayer("Selektive Farbe","selectiveColor","normal","violet",100,"",f,f),createLayer("Sättigung Farbe","hueSaturation","normal","blue",100,"",f,f),createLayer("Sättigung Luminanz","hueSaturation","luminosity","green",100,"",f,f),createLayer("Farbe in Balance","colorBalance","normal","yellowColor",100,"",f,f),createLayer("Gradation Kontrast","curves","normal","orange",100,"",f,f),createLayer("Dynamik","vibrance","normal","red",100,"",f,f),gotoLayer("Gradation neutral"),debug&&time_stop(start)}function tiefenmaske(e,r,a){var t=layer_selectedIDX_get();if(cancel=!1,e)layer_mergeVisible(e);else{if("LayerKind.SMARTOBJECT"!=doc.activeLayer.kind&&"LayerKind.NORMAL"!=doc.activeLayer.kind)return void alert("Abruch\n Eine Tiefenmakse von dieser Ebene kann nciht erstellt werden.");layer_copyLayers(),"LayerKind.SMARTOBJECT"==doc.activeLayer.kind&&rasterSmartObject(),layer_selectedIDX_get().length>1&&layer_mergeLayers()}nameLayer("helper__depthMask_image");for(var o=hasBackground()?0:1;layer_checkExistence(o);)o++;moveLayer("helper__depthMask_image",parseInt(o-1),"up"),gotoLayer("helper__depthMask_image"),selection_loop((function(){neural_depthmap2()})),nameLayer("layer__depthMask_map"),select_luminance(),layer_delete(),gotoLayer("helper__depthMask_image"),layer_delete(),cancel||("Selection"==a?(layer_selectedIDX_set(t),"nicht Tiefe"==r&&select_invert()):(gotoLayer(t[t.length-1]),selection2mask(r),"nicht Tiefe"==r&&(gotoMask(),invert(),gotoFill())))}function tiefenmakse_part1(e){layer_selectedIDX_get();if(e||layer_selectedIDX_get().length>1){e?layer_mergeVisible(e):(layer_copyLayers(),layer_mergeLayers()),nameLayer("helper__depthMask_image");for(var r=hasBackground()?0:1;layer_checkExistence(r);)r++;moveLayer("helper__depthMask_image",parseInt(r-1),"up"),gotoLayer("helper__depthMask_image")}else{for(layer_checkExistence(layer_getIDXbyString("Original")[0])?gotoLayer("Original"):gotoLayer(layer_selectedIDX_get()[layer_selectedIDX_get().length-1]);doc.activeLayer.kind!=LayerKind.NORMAL;)gotoLayer(getActiveLayerIndex()-1);doc.activeLayer.kind!=LayerKind.SmartObject&&(executeAction(sTID("copyToLayer"),void 0,DialogModes.NO),nameLayer("helper__depthMask_image"))}}function tiefenmakse_part2(e){nameLayer("layer__depthMask_map"),select_luminance(),layer_delete(),gotoLayer("helper__depthMask_image"),layer_delete(),createGroup("Tiefe","passThrough","none",100,f),maskFromSelection(),layer_checkExistence(layer_getIDXbyString("Dodge & Burn △◊▽")[0])&&moveLayer("Tiefe","Dodge & Burn △◊▽","up"),gotoLayer("Tiefe")}